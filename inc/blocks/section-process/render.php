{
  "content": "<?php\n/**\n * Section Process Block Template\n * \n * @param array $attributes Block attributes\n * @param string $content Block content\n * @param WP_Block $block Block object\n */\n\n// Prevent direct access\nif (!defined('ABSPATH')) {\n    exit;\n}\n\n// Extract attributes with defaults and apply security filters\n$section_title = $attributes['sectionTitle'] ?? 'Een gestroomlijnd proces';\n$background_color = $attributes['backgroundColor'] ?? '#f9fafb';\n$title_color = $attributes['titleColor'] ?? '#111827';\n$card_background_color = $attributes['cardBackgroundColor'] ?? '#ffffff';\n$card_text_color = $attributes['cardTextColor'] ?? '#374151';\n$card_title_color = $attributes['cardTitleColor'] ?? '#111827';\n$enable_hover_effect = $attributes['enableHoverEffect'] ?? true;\n$columns_desktop = $attributes['columnsDesktop'] ?? 4;\n$columns_tablet = $attributes['columnsTablet'] ?? 2;\n$columns_mobile = $attributes['columnsMobile'] ?? 1;\n$card_gap = $attributes['cardGap'] ?? '6';\n$process_steps = $attributes['processSteps'] ?? [];\n$padding_top = $attributes['paddingTop'] ?? '12';\n$padding_bottom = $attributes['paddingBottom'] ?? '12';\n$title_margin_bottom = $attributes['titleMarginBottom'] ?? '8';\n$card_border_radius = $attributes['cardBorderRadius'] ?? 'lg';\n$image_border_radius = $attributes['imageBorderRadius'] ?? 'none';\n$shadow_style = $attributes['shadowStyle'] ?? 'md';\n$hover_shadow_style = $attributes['hoverShadowStyle'] ?? 'lg';\n\n// Helper functions scoped to this template\n$get_grid_columns_class = function($mobile, $tablet, $desktop) {\n    $mobile_class = 'grid-cols-' . absint($mobile);\n    $tablet_class = 'sm:grid-cols-' . absint($tablet);\n    $desktop_class = 'lg:grid-cols-' . absint($desktop);\n    return \"{$mobile_class} {$tablet_class} {$desktop_class}\";\n};\n\n$get_gap_class = function($gap) {\n    return 'gap-' . esc_attr($gap);\n};\n\n$get_padding_class = function($top, $bottom) {\n    return 'py-' . esc_attr($top) . ' pb-' . esc_attr($bottom);\n};\n\n$get_title_margin_class = function($margin) {\n    return 'mb-' . esc_attr($margin);\n};\n\n$get_border_radius_class = function($type) {\n    if ($type === 'none') return '';\n    return 'rounded-' . esc_attr($type);\n};\n\n$get_shadow_class = function($shadow) {\n    if ($shadow === 'none') return '';\n    return 'shadow-' . esc_attr($shadow);\n};\n\n$get_hover_shadow_class = function($enable, $shadow) {\n    if (!$enable || $shadow === 'none') return '';\n    return 'hover:shadow-' . esc_attr($shadow);\n};\n\n// Calculate dynamic classes\n$grid_columns_class = $get_grid_columns_class($columns_mobile, $columns_tablet, $columns_desktop);\n$gap_class = $get_gap_class($card_gap);\n$padding_class = $get_padding_class($padding_top, $padding_bottom);\n$title_margin_class = $get_title_margin_class($title_margin_bottom);\n$card_border_radius_class = $get_border_radius_class($card_border_radius);\n$image_border_radius_class = $get_border_radius_class($image_border_radius);\n$shadow_class = $get_shadow_class($shadow_style);\n$hover_shadow_class = $get_hover_shadow_class($enable_hover_effect, $hover_shadow_style);\n\n// Build CSS classes\n$wrapper_classes = [\n    'section-process-block',\n    'w-full',\n    $padding_class,\n    'px-4',\n    'sm:px-6',\n    'lg:px-8'\n];\n\n// Add block attributes classes\nif (!empty($attributes['className'])) {\n    $wrapper_classes[] = $attributes['className'];\n}\n\n$wrapper_class = implode(' ', array_filter($wrapper_classes));\n\n// Prepare inline styles\n$section_styles = [];\nif ($background_color) {\n    $section_styles[] = 'background-color: ' . esc_attr($background_color);\n}\n\n$section_style_attr = !empty($section_styles) ? 'style=\"' . implode('; ', $section_styles) . '\"' : '';\n\n// Prepare title styles\n$title_styles = [];\nif ($title_color) {\n    $title_styles[] = 'color: ' . esc_attr($title_color);\n}\n\n$title_style_attr = !empty($title_styles) ? 'style=\"' . implode('; ', $title_styles) . '\"' : '';\n\n// Prepare card styles\n$card_styles = [];\nif ($card_background_color) {\n    $card_styles[] = 'background-color: ' . esc_attr($card_background_color);\n}\n\n$card_style_attr = !empty($card_styles) ? 'style=\"' . implode('; ', $card_styles) . '\"' : '';\n\n// Prepare card title styles\n$card_title_styles = [];\nif ($card_title_color) {\n    $card_title_styles[] = 'color: ' . esc_attr($card_title_color);\n}\n\n$card_title_style_attr = !empty($card_title_styles) ? 'style=\"' . implode('; ', $card_title_styles) . '\"' : '';\n\n// Prepare card text styles\n$card_text_styles = [];\nif ($card_text_color) {\n    $card_text_styles[] = 'color: ' . esc_attr($card_text_color);\n}\n\n$card_text_style_attr = !empty($card_text_styles) ? 'style=\"' . implode('; ', $card_text_styles) . '\"' : '';\n\n// Validate process steps\nif (empty($process_steps) || !is_array($process_steps)) {\n    $process_steps = [];\n}\n?>\n\n<section class=\"<?php echo esc_attr($wrapper_class); ?>\" <?php echo $section_style_attr; ?>\n         <?php if (!empty($attributes['anchor'])): ?>id=\"<?php echo esc_attr($attributes['anchor']); ?>\"<?php endif; ?>\n         role=\"region\"\n         aria-label=\"<?php echo esc_attr($section_title); ?>\">\n    \n    <div class=\"max-w-7xl mx-auto\">\n        \n        <?php if (!empty($section_title)): ?>\n            <h2 class=\"text-3xl sm:text-4xl lg:text-5xl font-bold <?php echo esc_attr($title_margin_class); ?>\" \n                <?php echo $title_style_attr; ?>>\n                <?php echo wp_kses_post($section_title); ?>\n            </h2>\n        <?php endif; ?>\n        \n        <?php if (!empty($process_steps)): ?>\n            <div class=\"grid <?php echo esc_attr($grid_columns_class); ?> <?php echo esc_attr($gap_class); ?>\">\n                \n                <?php foreach ($process_steps as $index => $step): \n                    // Validate step data\n                    $step_number = $step['stepNumber'] ?? '';\n                    $step_title = $step['title'] ?? '';\n                    $step_description = $step['description'] ?? '';\n                    $step_image_url = $step['imageUrl'] ?? '';\n                    $step_image_alt = $step['imageAlt'] ?? $step_title;\n                    $step_image_id = $step['imageId'] ?? null;\n                    \n                    // Skip if essential data is missing\n                    if (empty($step_title)) {\n                        continue;\n                    }\n                    \n                    // Get optimized image if ID is available\n                    if ($step_image_id) {\n                        $image_data = wp_get_attachment_image_src($step_image_id, 'large');\n                        if ($image_data) {\n                            $step_image_url = $image_data[0];\n                        }\n                    }\n                ?>\n                \n                <article class=\"process-step-card <?php echo esc_attr($card_border_radius_class); ?> <?php echo esc_attr($shadow_class); ?> <?php echo esc_attr($hover_shadow_class); ?> overflow-hidden transition-shadow duration-300\" \n                         <?php echo $card_style_attr; ?>\n                         itemscope \n                         itemtype=\"https://schema.org/HowToStep\"\n                         aria-labelledby=\"step-title-<?php echo esc_attr($index); ?>\">\n                    \n                    <?php if (!empty($step_image_url)): ?>\n                        <div class=\"aspect-[4/3] overflow-hidden <?php echo esc_attr($image_border_radius_class); ?>\">\n                            <img src=\"<?php echo esc_url($step_image_url); ?>\" \n                                 alt=\"<?php echo esc_attr($step_image_alt); ?>\" \n                                 class=\"w-full h-full object-cover\"\n                                 loading=\"lazy\"\n                                 itemprop=\"image\"\n                                 width=\"800\"\n                                 height=\"600\">\n                        </div>\n                    <?php endif; ?>\n                    \n                    <div class=\"p-6\">\n                        <h3 id=\"step-title-<?php echo esc_attr($index); ?>\" \n                            class=\"text-xl font-bold mb-3\" \n                            <?php echo $card_title_style_attr; ?>\n                            itemprop=\"name\">\n                            <?php \n                            if (!empty($step_number)) {\n                                echo esc_html($step_number) . '. ';\n                            }\n                            echo wp_kses_post($step_title); \n                            ?>\n                        </h3>\n                        \n                        <?php if (!empty($step_description)): ?>\n                            <p class=\"leading-relaxed\" \n                               <?php echo $card_text_style_attr; ?>\n                               itemprop=\"text\">\n                                <?php echo wp_kses_post($step_description); ?>\n                            </p>\n                        <?php endif; ?>\n                    </div>\n                    \n                </article>\n                \n                <?php endforeach; ?>\n                \n            </div>\n        <?php else: ?>\n            <div class=\"text-center py-12\">\n                <p class=\"text-gray-500\" <?php echo $card_text_style_attr; ?>>\n                    <?php esc_html_e('No process steps have been added yet.', 'julianboelen'); ?>\n                </p>\n            </div>\n        <?php endif; ?>\n        \n    </div>\n    \n</section>"
}